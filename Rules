#!/usr/bin/env ruby

preprocess do 
  add_missing_info 
end 

compile '/mailing-list-posts/' do
  filter :haml
  ## no layout as this gets included in homepage '/'
end

route '/mailing-list-posts/' do
  nil
end

route '/mailing-list-posts/[0-9]+/' do
  nil
end

compile '/style/*/' do
  filter :sass
end

compile '/' do
  filter :haml
  layout 'default'

end

compile '/workshops/' do
  filter :erb
  filter :bluecloth
  layout 'default'
end

compile '/workshops/*' do
  layout 'default'
end

compile '*' do
  case item[:extension]
  when '.md', '.markdown'
    filter :bluecloth
  when '.haml'
    filter :haml
  when '.sass'
    filter :sass
  end
  layout 'default'
end

route '/style/*/' do
  item.identifier.chop + '.css'
end

route '*' do
  item.identifier + 'index.html'
end

layout '*', :erb
